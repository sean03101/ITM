---
title: "B2_python_Jeong"
author: "Jeong, wonryeol"
date: "1/3/2021"
output:
  pdf_document: default
  html_document:
    df_print: paged
---



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(background = '718CBA')
library(reticulate)
py_install("pandas")
py_install("matplotlib")
py_install("numpy")
```

#Implementation


```{python}
import numpy as np
import pandas as pd 
import matplotlib.pyplot as plt
for X in range(11,15):
  MC_N = 10000
  D=np.random.choice(np.arange(11,16),MC_N,replace=True) # random discrete uniform
    
  sales_rev = 2*np.minimum(D,X) # vector level minimum
  
  salvage_rev = 0.5*np.maximum(X-D,0) # vector level maximum
  
  material_cost = 1*X
    
  profit = sales_rev + salvage_rev-material_cost
    
  print('X: ',X,' expected profit: ', np.mean(profit) )



```

\newpage


#Continuous distribution - grid search approach

```{python}



try_X=np.arange(20,40.01,step=0.01)
exp_profits = np.array([])

for X in try_X:
  MC_N = 10000
  D = np.random.uniform(20,40,MC_N)
  
  sales_rev=2*np.minimum(D,X) # vector level minimum
  
  salvage_rev=0.5*np.maximum(X-D,0) # vector level maximum
  
  material_cost=1*X
  
  exp_profit = np.mean(sales_rev + salvage_rev - material_cost)
  exp_profits = np.append(exp_profits,exp_profit)




results = pd.DataFrame({'try_X':try_X,'exp_profits':exp_profits})
results
```

```{python}
from scipy.interpolate import make_interp_spline, BSpline


plt.plot(results['try_X'],results['exp_profits'],color='black',alpha = 0.1)

plt.title('Plot for Expected Profit', loc='left',fontsize=25)

x_new = np.linspace(results['try_X'].min(),results['try_X'].max(),300)
spline = make_interp_spline(results['try_X'], results['exp_profits'], k=3) #BSpline object
power_smooth = spline(x_new)


plt.plot(x_new,power_smooth , color = 'blue')
plt.xlabel('try_X')
plt.ylabel('exp_profits')
plt.show()
```
### append

```{python}

idx=np.where(exp_profits==np.max(exp_profits))

print(try_X[idx])
print(exp_profits[idx])

```

