---
title: "A6 Python"
author: "Jaemin Park"
date: "`r Sys.Date()`"
output:
  pdf_document:
    latex_engine: xelatex
    highlight: haddock
    keep_tex: yes
    includes:
      in_header: rmd-pdf-support/latex-topmatter.tex
    toc: yes
    toc_depth: 2
  word_document:
    toc: yes
    toc_depth: '2'
  html_document:
    toc: yes
    toc_depth: '2'
    df_print: paged
smaller: yes
classoption: a4paper
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(background = '718CBA')  
```

\newpage

```{python import, echo=FALSE,message=F}
import numpy as np
import pandas as pd
import time
import matplotlib.pyplot as plt
```
\newpage

## p.9 Implementation

```{python,echo=T}
np.random.seed(1234)
beg_time=time.time()
old_est=0
n=1
MC_N=10**6
while True:
    x_i=np.random.uniform(0,1)*2-1
    y_i=np.random.uniform(0,1)*2-1
    t_i=np.sqrt(x_i**2+y_i**2)
    A_n=4*(t_i<=1)
    new_est=((n-1)/n)*old_est + (1/n)*A_n
    if n > MC_N:
        break
    n+=1
    old_est=new_est
    
print(new_est)
end_time=time.time()
print(end_time-beg_time,' secs')
```

\newpage

## p.10 Convergence trajectory

```{python,echo=T}
np.random.seed(1234)
old_est=0
n=1
MC_N=10**6
results=[]
while True:
    x_i=np.random.uniform(0,1)*2-1
    y_i=np.random.uniform(0,1)*2-1
    t_i=np.sqrt(x_i**2+y_i**2)
    
    A_n=4*(t_i<=1)
    new_est=((n-1)/n)*old_est + (1/n)*A_n
    
    results.append(new_est)
    
    if n >= MC_N :
        break
    
    n+=1
    old_est=new_est
    
plt.plot(results[:20],marker='o')
plt.title('Estimate '+r'$\pi$'+' trying 20 times',fontweight='bold')
plt.xlabel('Index')
plt.ylabel('results[0:20]')
plt.xticks([5,10,15,20])
plt.show()
```

\newpage

```{python,echo=T}
plt.plot(results[1000:1020],marker='o')
plt.title('Estimate '+r'$\pi$'+' trying 1020 times',fontweight='bold')
plt.xlabel('Index')
plt.ylabel('results[1000:1020]')
plt.xticks([5,10,15,20])
plt.show()
```

\newpage

```{python,echo=T}
plt.plot(results[100000:100020],marker='o')
ax=plt.gca()
ax.get_yaxis().get_major_formatter().set_useOffset(False)
plt.title('Estimate '+r'$\pi$'+' trying 100020 times',fontweight='bold')
plt.xlabel('Index')
plt.ylabel('results[100000:100020]')
plt.xticks([5,10,15,20])
plt.show()
```